/**
 * Simple Sidebar Manager - Không cần fetch file
 * Sử dụng khi không thể load file HTML từ server
 */

class SimpleSidebarManager {
  constructor() {
    this.sidebar = null;
    this.overlay = null;
    this.menuToggle = null;
    this.currentPage = null;
    this.init();
  }

  init() {
    // Tạo sidebar ngay lập tức
    this.createSidebar();
  }

  createSidebar() {
    console.log("Creating simple sidebar");

    // Tạo sidebar HTML
    const sidebarHTML = `
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="logo">
            <img src="../../common/assets/images/atc-logo.png" alt="ATC Logo" class="logo-image" />
          </div>
          <div class="company-name">ATC Petro</div>
        </div>
        <div class="sidebar-menu">
          <div class="menu-item" data-page="address-mac">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                <path d="M9.00008 0.666672C4.40008 0.666672 0.666748 4.40001 0.666748 9.00001C0.666748 13.6 4.40008 17.3333 9.00008 17.3333C13.6001 17.3333 17.3334 13.6 17.3334 9.00001C17.3334 4.40001 13.6001 0.666672 9.00008 0.666672ZM6.10841 10.225C6.35008 10.4667 6.35008 10.8667 6.10841 11.1083C5.98341 11.2333 5.82508 11.2917 5.66675 11.2917C5.50841 11.2917 5.35008 11.2333 5.22508 11.1083L3.55841 9.44167C3.31675 9.20001 3.31675 8.80001 3.55841 8.55834L5.22508 6.89167C5.46675 6.65001 5.86675 6.65001 6.10841 6.89167C6.35008 7.13334 6.35008 7.53334 6.10841 7.77501L4.88341 9.00001L6.10841 10.225ZM10.4084 7.30001L8.74175 11.1917C8.64175 11.425 8.40841 11.5667 8.16675 11.5667C8.08342 11.5667 8.00008 11.55 7.92508 11.5167C7.60842 11.3833 7.45841 11.0167 7.60008 10.6917L9.26675 6.8C9.40008 6.48334 9.76675 6.33334 10.0834 6.47501C10.4001 6.61667 10.5417 6.98334 10.4084 7.30001ZM14.4417 9.44167L12.7751 11.1083C12.6501 11.2333 12.4917 11.2917 12.3334 11.2917C12.1751 11.2917 12.0167 11.2333 11.8917 11.1083C11.6501 10.8667 11.6501 10.4667 11.8917 10.225L13.1167 9.00001L11.8917 7.77501C11.6501 7.53334 11.6501 7.13334 11.8917 6.89167C12.1334 6.65001 12.5334 6.65001 12.7751 6.89167L14.4417 8.55834C14.6834 8.80001 14.6834 9.20001 14.4417 9.44167Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Địa chỉ MAC</div>
          </div>
          <div class="menu-item" data-page="register-pump-nozzle">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M12.6514 1.68782C13.507 1.57512 14.3618 1.90804 15.2165 2.67822L15.3874 2.83854L15.3882 2.83935L15.5542 3.007C16.3553 3.84592 16.7196 4.69736 16.661 5.56315C16.6079 6.34455 16.2156 7.02097 15.7357 7.5944L15.5257 7.83366L9.32373 14.5955L9.32292 14.5947C9.14358 14.7945 8.9049 14.9636 8.6792 15.0879C8.50699 15.1827 8.31312 15.2682 8.1193 15.3247L7.92562 15.3711L7.92155 15.3719L5.48909 15.7992L5.48991 15.8C4.87818 15.9085 4.28996 15.7499 3.87288 15.3426C3.45895 14.9383 3.28087 14.355 3.34717 13.7402V13.7386L3.6263 11.2174L3.62793 11.2061L3.66292 11.0116C3.7077 10.8154 3.77972 10.6158 3.86068 10.437C3.96799 10.2 4.11555 9.94618 4.29199 9.7526L4.29362 9.75097L10.4956 2.98909L10.7153 2.7596C11.2443 2.23493 11.8839 1.78893 12.6514 1.68782ZM12.8149 2.92724C12.3777 2.98483 11.9196 3.28522 11.416 3.83301L11.4168 3.83382L5.21484 10.5941L5.21566 10.5949C5.15808 10.6581 5.07487 10.785 4.99919 10.9521C4.92397 11.1183 4.87965 11.2713 4.86735 11.3664L4.58984 13.8761C4.55855 14.1706 4.64848 14.3528 4.74609 14.4482C4.84072 14.5407 5.00747 14.6164 5.27181 14.5695L5.27262 14.5687L7.70182 14.1406C7.78656 14.1249 7.92598 14.0765 8.07699 13.9933C8.22924 13.9094 8.34107 13.82 8.39518 13.7589L8.40251 13.75L14.6045 6.98893L14.6053 6.98812L14.7827 6.78629C15.1716 6.32005 15.3855 5.89039 15.4134 5.47851C15.4432 5.03852 15.2682 4.46745 14.5158 3.73453C13.7665 3.00894 13.2164 2.87445 12.8149 2.92724Z" fill="#FFFAFA"/>
                <path d="M10.3255 3.54817C10.6456 3.50105 10.9445 3.70578 11.0221 4.01286L11.0352 4.07552L11.0653 4.25862C11.3958 6.06479 12.5954 7.2377 14.2716 7.48209L14.4409 7.50325L14.5044 7.51383C14.8143 7.57905 15.0308 7.86928 14.9967 8.19092C14.9624 8.51273 14.6894 8.75162 14.3726 8.75L14.3091 8.74674L14.0828 8.71826C11.8481 8.38958 10.2589 6.78248 9.83643 4.48893L9.79818 4.25781L9.79248 4.19433C9.77806 3.87776 10.0053 3.59536 10.3255 3.54817Z" fill="#FFFAFA"/>
                <path d="M17.5 17.0833C17.8452 17.0833 18.125 17.3632 18.125 17.7083C18.125 18.0535 17.8452 18.3333 17.5 18.3333H2.5C2.15482 18.3333 1.875 18.0535 1.875 17.7083C1.875 17.3632 2.15482 17.0833 2.5 17.0833H17.5Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Khai báo vòi bơm</div>
          </div>
          <div class="menu-item" data-page="fuel-config">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M9.18599 1.95158C9.66056 1.57171 10.3212 1.57195 10.7963 1.95082L10.797 1.95006C11.5272 2.53052 12.981 3.77841 14.2559 5.42946C15.5224 7.06955 16.6704 9.18208 16.6666 11.4805L16.6577 11.8326C16.479 15.4485 13.5639 18.3332 10.0003 18.3333C6.43575 18.3333 3.52096 15.4406 3.34216 11.825L3.33334 11.473C3.32196 9.14478 4.46314 7.03278 5.72854 5.39917C6.99916 3.75891 8.45099 2.52995 9.18599 1.95233V1.95158ZM10.1048 2.86912C10.0376 2.81558 9.94675 2.81545 9.87968 2.86912L9.876 2.8729C9.17829 3.42088 7.80386 4.5851 6.61203 6.12367C5.41302 7.67151 4.45309 9.52736 4.46326 11.4692V11.473C4.46342 14.6097 6.94572 17.1705 10.0003 17.1705C13.0557 17.1703 15.5366 14.6163 15.5367 11.4805V11.479C15.54 9.56855 14.575 7.71249 13.371 6.15319C12.1751 4.60453 10.7998 3.42199 10.1063 2.87063L10.1048 2.86912Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Cấu hình nhiên liệu</div>
          </div>
          <div class="menu-item" data-page="fuel-price-config">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0001 4.37499C10.3453 4.37499 10.6251 4.65481 10.6251 4.99999V5.49153H10.9351L11.0653 5.49478C12.3998 5.56516 13.4099 6.71063 13.4099 8.05826C13.4099 8.40341 13.1301 8.68326 12.7849 8.68326C12.4398 8.68322 12.1599 8.40338 12.1599 8.05826C12.1599 7.34698 11.6561 6.81225 11.0564 6.74804L10.9351 6.74153H10.6251V9.55321L11.8897 9.99267L11.8938 9.99429L12.0354 10.0472C12.3679 10.1793 12.7114 10.3734 12.9737 10.708C13.2793 11.0978 13.4099 11.5938 13.4099 12.1916C13.4099 13.443 12.4317 14.5082 11.1687 14.5085H10.6251V15C10.6251 15.3452 10.3453 15.625 10.0001 15.625C9.6549 15.625 9.37508 15.3452 9.37508 15V14.5085H9.07642C7.67811 14.5083 6.60175 13.3327 6.60164 11.9417C6.60164 11.5965 6.88147 11.3167 7.22664 11.3167C7.57182 11.3167 7.85164 11.5965 7.85164 11.9417C7.85174 12.7004 8.42504 13.2583 9.07642 13.2585H9.37508V10.4419L8.12183 10.0073L8.11776 10.0057C7.74354 9.87305 7.33761 9.6743 7.03784 9.29198C6.73229 8.9022 6.60168 8.40609 6.60164 7.80842C6.60164 6.55685 7.58049 5.49153 8.84367 5.49153H9.37508V4.99999C9.37508 4.65481 9.6549 4.37499 10.0001 4.37499ZM10.6251 13.2585H11.1687C11.6887 13.2582 12.1599 12.8065 12.1599 12.1916C12.1599 11.7728 12.0696 11.5813 11.9898 11.4795C11.9042 11.3703 11.7602 11.2733 11.4763 11.1727L10.6251 10.8756V13.2585ZM8.84367 6.74153C8.32352 6.74153 7.85164 7.19333 7.85164 7.80842C7.85168 8.22716 7.94192 8.41868 8.02173 8.5205C8.10733 8.62969 8.25135 8.72666 8.53524 8.8273L9.37508 9.11864V6.74153H8.84367Z" fill="#FFFAFA"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0001 1.66666C14.6025 1.66666 18.3334 5.39762 18.3334 9.99999C18.3334 14.6024 14.6025 18.3333 10.0001 18.3333C5.39771 18.3333 1.66675 14.6024 1.66675 9.99999C1.66675 5.39762 5.39771 1.66666 10.0001 1.66666ZM10.0001 2.91666C6.08806 2.91666 2.91675 6.08797 2.91675 9.99999C2.91675 13.912 6.08806 17.0833 10.0001 17.0833C13.9121 17.0833 17.0834 13.912 17.0834 9.99999C17.0834 6.08797 13.9121 2.91666 10.0001 2.91666Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Cấu hình giá nhiên liệu</div>
          </div>
          <div class="menu-item" data-page="pump-info">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M8.81437 10.0032C9.12935 10.0354 9.37508 10.3015 9.37508 10.625C9.37508 10.9485 9.12935 11.2146 8.81437 11.2467L8.75008 11.25H5.20841C4.86324 11.25 4.58341 10.9702 4.58341 10.625C4.58341 10.2798 4.86324 9.99999 5.20841 9.99999H8.75008L8.81437 10.0032Z" fill="#FFFAFA"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.8243 3.33332C10.3202 3.33332 10.8541 3.4657 11.2647 3.86067C11.6805 4.26065 11.875 4.83789 11.8751 5.52978V6.55354C11.875 7.24542 11.6805 7.82266 11.2647 8.22265C10.8541 8.61762 10.3202 8.74999 9.8243 8.74999H6.6342C6.13825 8.74999 5.60443 8.61762 5.19377 8.22265C4.77802 7.82266 4.58349 7.24542 4.58341 6.55354V5.52978C4.58349 4.83789 4.77802 4.26065 5.19377 3.86067C5.60443 3.4657 6.13825 3.33332 6.6342 3.33332H9.8243ZM6.6342 4.58332C6.34571 4.58332 6.16647 4.65959 6.06047 4.76155C5.9598 4.8584 5.83349 5.06633 5.83342 5.52978V6.55354C5.83349 7.01699 5.9598 7.22491 6.06047 7.32177C6.16647 7.42372 6.34571 7.49999 6.6342 7.49999H9.8243C10.1128 7.49999 10.292 7.42372 10.398 7.32177C10.4987 7.22491 10.625 7.01699 10.6251 6.55354V5.52978C10.625 5.06633 10.4987 4.8584 10.398 4.76155C10.292 4.65959 10.1128 4.58332 9.8243 4.58332H6.6342Z" fill="#FFFAFA"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.2647 1.04166C12.0238 1.04166 12.7595 1.28155 13.309 1.80989C13.8638 2.34334 14.1667 3.11074 14.1667 4.04133V12.7156L17.0834 12.7091V8.71907L15.7626 8.05907L15.7065 8.02733C15.4391 7.85778 15.3382 7.51017 15.4827 7.22086C15.6274 6.93154 15.9662 6.80352 16.2623 6.91568L16.3209 6.94091L17.9875 7.77424L18.0632 7.819C18.2308 7.93455 18.3334 8.12612 18.3334 8.33332V13.3333C18.3334 13.6779 18.0546 13.9574 17.71 13.9583L14.1667 13.9656V17.0833H16.4584C16.8036 17.0833 17.0834 17.3631 17.0834 17.7083C17.0834 18.0535 16.8036 18.3333 16.4584 18.3333H2.29175C1.94657 18.3333 1.66675 18.0535 1.66675 17.7083C1.66675 17.3631 1.94657 17.0833 2.29175 17.0833V4.04133C2.29182 3.11074 2.59466 2.34334 3.1495 1.80989C3.69904 1.28155 4.43469 1.04166 5.19377 1.04166H11.2647ZM5.19377 2.29166C4.69318 2.29166 4.29009 2.44759 4.01619 2.71076C3.74773 2.96887 3.54182 3.38894 3.54175 4.04133V17.0833H12.9167V4.04133C12.9167 3.38894 12.7108 2.96887 12.4423 2.71076C12.1684 2.44759 11.7653 2.29166 11.2647 2.29166H5.19377Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Thông tin vòi bơm</div>
          </div>
          <div class="menu-item" data-page="pump-logs">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M11.6667 11.6664C12.0118 11.6664 12.2915 11.9464 12.2917 12.2914C12.2917 12.6366 12.0118 12.9164 11.6667 12.9164H8.33333C7.98816 12.9164 7.70833 12.6366 7.70833 12.2914C7.70846 11.9464 7.98824 11.6664 8.33333 11.6664H11.6667Z" fill="#FFFAFA"/>
                <path d="M12.5 9.16644C12.8451 9.16644 13.1249 9.44637 13.125 9.79144C13.125 10.1366 12.8452 10.4164 12.5 10.4164H7.5C7.15482 10.4164 6.875 10.1366 6.875 9.79144C6.87513 9.44637 7.1549 9.16644 7.5 9.16644H12.5Z" fill="#FFFAFA"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.625 1.66644C10.9877 1.66644 11.617 1.64611 12.1175 1.97975C12.5525 2.26974 12.7875 2.73579 12.8752 3.34694L13.1567 3.37705C14.1035 3.50523 15.1253 3.84885 15.9481 4.62217C16.9025 5.51932 17.4999 6.9111 17.5 8.94183V12.7081C17.5 14.471 17.0586 15.9081 16.0669 16.9C15.075 17.8919 13.638 18.3331 11.875 18.3331H8.125C5.98789 18.3331 4.50344 17.9113 3.59212 16.8699C2.69904 15.8491 2.50001 14.3857 2.5 12.7081V8.94183C2.50004 6.99148 2.85205 5.58437 3.7085 4.65716C4.54506 3.75174 5.74404 3.43259 7.12402 3.34287C7.21213 2.73363 7.44842 2.26913 7.88249 1.97975C8.38299 1.64611 9.01231 1.66644 9.375 1.66644H10.625ZM7.12728 4.59694C5.90402 4.68579 5.12599 4.96455 4.62646 5.50514C4.09363 6.08204 3.75004 7.09288 3.75 8.94183V12.7081C3.75001 14.3635 3.96796 15.4005 4.53288 16.0463C5.07991 16.6715 6.09556 17.0831 8.125 17.0831H11.875C13.4453 17.0831 14.5083 16.691 15.1831 16.0162C15.8578 15.3414 16.25 14.2783 16.25 12.7081V8.94183C16.2499 7.16489 15.7353 6.13851 15.092 5.53363C14.5165 4.99279 13.7678 4.72171 12.9932 4.61647L12.8898 4.60508C12.8561 4.88381 12.7802 5.18538 12.6034 5.45062C12.2232 6.02088 11.5409 6.24977 10.625 6.24977H9.375C9.0123 6.24977 8.38299 6.27013 7.88249 5.93646C7.45402 5.6508 7.21802 5.19466 7.12728 4.59694ZM9.375 2.91644C8.90441 2.91644 8.70034 2.93682 8.57585 3.01979C8.52111 3.05629 8.33335 3.20738 8.33333 3.95811C8.33333 4.70874 8.52106 4.85988 8.57585 4.89642C8.70034 4.97941 8.90436 4.99977 9.375 4.99977H10.625C11.3758 4.99977 11.5268 4.812 11.5633 4.75726C11.6463 4.63276 11.6667 4.42868 11.6667 3.95811C11.6667 3.20738 11.4789 3.05629 11.4242 3.01979C11.2997 2.93682 11.0956 2.91644 10.625 2.91644H9.375Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Danh sách log bơm</div>
          </div>
          <div class="menu-item" data-page="wifi-config">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M7.61413 15.0173C9.05702 13.9033 10.9507 13.9033 12.3936 15.0173C12.6668 15.2283 12.7176 15.6206 12.5067 15.8938C12.2958 16.1666 11.9033 16.2175 11.6302 16.0069C10.6373 15.2403 9.37037 15.2403 8.37748 16.0069C8.10431 16.2173 7.71182 16.1668 7.50101 15.8938C7.2902 15.6207 7.3412 15.2283 7.61413 15.0173Z" fill="#FFFAFA"/>
                <path d="M5.6016 12.1959C8.25493 10.1408 11.7382 10.1408 14.3915 12.1959C14.6643 12.4073 14.7142 12.8003 14.503 13.0732C14.2916 13.346 13.8986 13.3959 13.6257 13.1847C11.4229 11.4785 8.56931 11.4784 6.36657 13.1847C6.09378 13.3957 5.70144 13.3457 5.49011 13.0732C5.27894 12.8003 5.32879 12.4072 5.6016 12.1959Z" fill="#FFFAFA"/>
                <path d="M4.15303 9.38258C7.69258 6.64974 12.3151 6.64977 15.8547 9.38258C16.1278 9.59352 16.1787 9.98585 15.9678 10.259C15.7568 10.5321 15.3637 10.5822 15.0905 10.3713C12.001 7.98628 8.00579 7.98603 4.91638 10.3713C4.64318 10.5821 4.2508 10.5322 4.03991 10.259C3.82907 9.98591 3.88005 9.59356 4.15303 9.38258Z" fill="#FFFAFA"/>
                <path d="M1.91019 6.69947C6.80636 2.91855 13.1941 2.91844 18.0902 6.69947C18.3633 6.91035 18.414 7.30276 18.2033 7.57594C17.9925 7.84899 17.6 7.89967 17.3269 7.68906C12.8807 4.25544 7.11971 4.25555 2.67354 7.68906C2.40036 7.89967 2.00795 7.84899 1.79708 7.57594C1.5863 7.30275 1.63708 6.9104 1.91019 6.69947Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Cấu hình Wifi</div>
          </div>
          <div class="menu-item" data-page="time-sync">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M9.69165 5.63313C10.0368 5.63313 10.3165 5.91304 10.3167 6.25813V9.67447C10.3167 9.80239 10.3659 9.98857 10.4745 10.179C10.5559 10.3216 10.6517 10.434 10.7406 10.5086L10.8269 10.5705L10.8285 10.5713L13.4115 12.1134L13.4653 12.1484C13.7195 12.3374 13.7937 12.6925 13.628 12.9704C13.4621 13.248 13.115 13.3501 12.828 13.2161L12.7711 13.1868L10.1881 11.6447C9.84859 11.4429 9.57488 11.1258 9.3881 10.7983C9.20096 10.4701 9.06665 10.0715 9.06665 9.67447V6.25813C9.06676 5.91304 9.34654 5.63313 9.69165 5.63313Z" fill="#FFFAFA"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0001 1.66666C14.6001 1.66666 18.3334 5.39999 18.3334 9.99999C18.3334 14.6 14.6001 18.3333 10.0001 18.3333C5.40008 18.3333 1.66675 14.6 1.66675 9.99999C1.66675 5.39999 5.40008 1.66666 10.0001 1.66666ZM10.0001 2.91666C6.09044 2.91666 2.91675 6.09035 2.91675 9.99999C2.91675 13.9096 6.09044 17.0833 10.0001 17.0833C13.9097 17.0833 17.0834 13.9096 17.0834 9.99999C17.0834 6.09035 13.9097 2.91666 10.0001 2.91666Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Đồng bộ thời gian</div>
          </div>
          <div class="menu-item" data-page="change-password">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0833 6.04206C13.1188 6.04211 13.9583 6.88155 13.9583 7.91706C13.9581 8.95238 13.1187 9.79201 12.0833 9.79206C11.0479 9.79206 10.2085 8.95242 10.2083 7.91706C10.2083 6.88152 11.0478 6.04206 12.0833 6.04206ZM12.0833 7.29206C11.7382 7.29206 11.4583 7.57188 11.4583 7.91706C11.4585 8.26206 11.7383 8.54206 12.0833 8.54206C12.4283 8.54201 12.7081 8.26203 12.7083 7.91706C12.7083 7.57191 12.4285 7.29211 12.0833 7.29206Z" fill="#FFFAFA"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.56673 3.51113C10.0251 1.05281 14.0161 1.0528 16.4827 3.51113C18.9493 5.96947 18.95 9.97781 16.4917 12.4361L16.3281 12.5924C14.6212 14.1755 12.2487 14.6484 10.1579 13.9945L6.23291 17.9105C5.94952 18.2021 5.39096 18.3774 4.99104 18.3191L3.17464 18.0692C2.61239 17.9911 2.08675 17.4882 1.94742 16.9315L1.92464 16.8192L1.6748 15.0028C1.62377 14.6529 1.764 14.1811 1.98404 13.879L2.08333 13.761L5.99934 9.84414C5.35358 7.74529 5.81865 5.37241 7.40885 3.67308L7.56673 3.51113ZM15.6006 4.39655C13.6828 2.48522 10.6186 2.42721 8.6385 4.21589L8.45052 4.39492L8.44807 4.39655C7.07692 5.76117 6.65778 7.73078 7.19482 9.4763C7.33082 9.91866 7.21111 10.4006 6.88395 10.7279L2.99153 14.6195C2.98952 14.6226 2.98623 14.6277 2.98258 14.6342C2.96912 14.658 2.95298 14.6929 2.93945 14.7335C2.92599 14.774 2.91888 14.8094 2.91585 14.8336C2.91349 14.8527 2.91508 14.8554 2.91422 14.8425L3.1608 16.6321C3.16253 16.6374 3.16708 16.6482 3.17545 16.6638C3.19037 16.6915 3.21363 16.7246 3.24462 16.7558C3.27585 16.7871 3.30726 16.809 3.33089 16.8217C3.35457 16.8344 3.36046 16.8326 3.34635 16.8306L5.15869 17.0797C5.16214 17.0795 5.16741 17.0796 5.17415 17.0788C5.19945 17.076 5.23397 17.0689 5.27099 17.0569C5.30778 17.0449 5.33618 17.0316 5.35319 17.0219C5.372 17.0111 5.3618 17.0133 5.3361 17.0398C5.34053 17.0352 5.34542 17.0304 5.34993 17.0259L6.36311 16.0144L5.31412 15.0305L5.26936 14.9849C5.06141 14.746 5.06435 14.3836 5.28564 14.1475C5.50691 13.9117 5.86805 13.8856 6.11979 14.0775L6.16862 14.119L7.24772 15.1306L9.2749 13.1091L9.40511 12.996C9.72409 12.7553 10.1434 12.6801 10.5314 12.8015C12.2603 13.342 14.2318 12.9207 15.6095 11.5499C17.5773 9.57985 17.5764 6.36598 15.6006 4.39655Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Đổi mật khẩu</div>
          </div>
          <div class="menu-item logout" data-page="logout">
            <div class="menu-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M12.3259 1.66669C14.3018 1.66669 15.8474 2.03431 16.8873 3.01353C17.9365 4.00166 18.3334 5.48034 18.3334 7.36005V12.64C18.3334 14.5197 17.9365 15.9984 16.8873 16.9865C15.8474 17.9657 14.3018 18.3334 12.3259 18.3334H12.2144C10.4352 18.3333 9.00914 18.035 7.98348 17.2624C6.99814 16.52 6.48116 15.4173 6.29484 14.0145L6.26147 13.7297L6.25903 13.6654C6.25995 13.3488 6.50031 13.078 6.82218 13.0461C7.14424 13.0142 7.43318 13.2328 7.49601 13.5433L7.50578 13.6068L7.53345 13.8493C7.69024 15.0347 8.0988 15.7842 8.73543 16.2639C9.44003 16.7947 10.5377 17.0833 12.2144 17.0834H12.3259C14.1932 17.0834 15.3399 16.7261 16.0304 16.0759C16.7111 15.4345 17.0834 14.3789 17.0834 12.64V7.36005C17.0834 5.62112 16.7111 4.5655 16.0304 3.92417C15.3399 3.27398 14.1932 2.91669 12.3259 2.91669H12.2144C10.5249 2.91671 9.42289 3.20925 8.71834 3.74758C8.03877 4.26692 7.62145 5.09998 7.49764 6.45347L6.87508 6.3965L6.25252 6.34035C6.39526 4.77937 6.90654 3.55923 7.95907 2.75474C8.98695 1.96929 10.4221 1.6667 12.2144 1.66669H12.3259Z" fill="#FFFAFA"/>
                <path d="M4.39705 7.01499C4.64254 6.81479 5.00482 6.82931 5.23364 7.05813C5.46242 7.28695 5.47698 7.64925 5.27677 7.89471L5.23364 7.94192L3.80054 9.37502H13.5417C13.8869 9.37502 14.1667 9.65484 14.1667 10C14.1667 10.3452 13.8869 10.625 13.5417 10.625H3.80054L5.23364 12.0581C5.47765 12.3022 5.47766 12.6979 5.23364 12.9419C4.98958 13.186 4.59394 13.1859 4.34985 12.9419L1.84985 10.4419C1.8466 10.4387 1.84407 10.4346 1.8409 10.4313C1.82393 10.4136 1.80932 10.394 1.79451 10.3744C1.78604 10.3632 1.7769 10.3526 1.76929 10.341C1.75771 10.3233 1.74813 10.3045 1.73836 10.2857C1.73023 10.2699 1.72147 10.2547 1.71476 10.2385C1.70766 10.2213 1.70244 10.2035 1.69686 10.1856C1.69072 10.1659 1.68473 10.1463 1.68058 10.1262C1.67745 10.1109 1.67607 10.0954 1.67407 10.0798C1.67124 10.0578 1.66806 10.036 1.66756 10.0139C1.66746 10.0093 1.66675 10.0046 1.66675 10C1.66675 9.98935 1.66866 9.97882 1.66919 9.96828C1.67043 9.94346 1.67233 9.91878 1.67651 9.89423C1.67892 9.88011 1.68294 9.8665 1.68628 9.85272C1.69151 9.8311 1.69662 9.8095 1.70418 9.78843C1.71031 9.77141 1.71781 9.75509 1.72534 9.73879C1.734 9.71999 1.7432 9.70149 1.75382 9.68345C1.76261 9.66855 1.77235 9.65439 1.78231 9.64032C1.79047 9.62878 1.79768 9.61641 1.80672 9.60533L1.823 9.58661C1.82694 9.58215 1.83114 9.57794 1.83521 9.57359L1.84985 9.55813L4.34985 7.05813L4.39705 7.01499Z" fill="#FFFAFA"/>
                <path d="M7.49764 6.45347C7.4662 6.79721 7.16185 7.05049 6.81812 7.01906C6.47463 6.98753 6.22135 6.68385 6.25252 6.34035L7.49764 6.45347Z" fill="#FFFAFA"/>
              </svg>
            </div>
            <div class="menu-text">Đăng xuất</div>
          </div>
        </div>
      </div>
      <div class="sidebar-overlay" id="sidebarOverlay"></div>
    `;

    // Thêm vào body
    document.body.insertAdjacentHTML("afterbegin", sidebarHTML);

    // Khởi tạo references
    this.sidebar = document.getElementById("sidebar");
    this.overlay = document.getElementById("sidebarOverlay");
    this.menuToggle = document.getElementById("menuToggle");

    // Set active page
    this.setActivePage();

    // Bind events
    this.bindEvents();

    console.log("Simple sidebar created successfully");
  }

  setActivePage() {
    // Lấy tên trang hiện tại từ URL
    const currentPath = window.location.pathname;
    const currentPage =
      currentPath.split("/").pop().replace(".html", "") || "address-mac";

    console.log("Current page:", currentPage);

    // Xóa active class cũ
    const activeItems = this.sidebar.querySelectorAll(".menu-item.active");
    activeItems.forEach((item) => item.classList.remove("active"));

    // Thêm active class cho trang hiện tại
    const currentMenuItem = this.sidebar.querySelector(
      `[data-page="${currentPage}"]`
    );
    if (currentMenuItem) {
      currentMenuItem.classList.add("active");
      console.log("Set active menu item:", currentPage);
    }

    this.currentPage = currentPage;
  }

  bindEvents() {
    // Toggle sidebar
    if (this.menuToggle) {
      this.menuToggle.addEventListener("click", () => {
        this.toggleSidebar();
      });
    }

    // Đóng sidebar khi click overlay
    if (this.overlay) {
      this.overlay.addEventListener("click", () => {
        this.closeSidebar();
      });
    }

    // Navigation
    const menuItems = this.sidebar.querySelectorAll(".menu-item[data-page]");
    menuItems.forEach((item) => {
      item.addEventListener("click", (e) => {
        const page = item.getAttribute("data-page");
        if (page && page !== this.currentPage) {
          this.navigateToPage(page);
        }
      });
    });
  }

  toggleSidebar() {
    console.log("Toggle sidebar clicked");
    if (this.sidebar) {
      this.sidebar.classList.toggle("active");
      if (this.overlay) {
        this.overlay.classList.toggle("active");
      }
      console.log("Sidebar classes:", this.sidebar.className);
    } else {
      console.error("Sidebar element not found");
    }
  }

  closeSidebar() {
    if (this.sidebar) {
      this.sidebar.classList.remove("active");
      if (this.overlay) {
        this.overlay.classList.remove("active");
      }
    }
  }

  navigateToPage(page) {
    // Đóng sidebar trước khi navigate
    this.closeSidebar();

    // Navigate đến trang mới
    const pageUrls = {
      "address-mac": "../address-mac/index.html",
      "register-pump-nozzle": "../register-pump-nozzle/index.html",
      "fuel-config": "../fuel-config/index.html",
      "fuel-price-config": "../fuel-price-config/index.html",
      "pump-info": "../pump-info/index.html",
      "pump-logs": "../pump-logs/index.html",
      "wifi-config": "../wifi-config/index.html",
      "time-sync": "../time-sync/index.html",
      "change-password": "../change-password/index.html",
      logout: "../login/index.html",
    };

    if (pageUrls[page]) {
      window.location.href = pageUrls[page];
    }
  }
}

// Khởi tạo sidebar khi DOM loaded
document.addEventListener("DOMContentLoaded", () => {
  window.sidebarManager = new SimpleSidebarManager();
});
